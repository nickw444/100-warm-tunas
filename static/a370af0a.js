'use strict';var ea="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,fa="function"==typeof Object.defineProperties?Object.defineProperty:function(p,v,n){p!=Array.prototype&&p!=Object.prototype&&(p[v]=n.value)};function ha(p,v){if(v){var n=ea;p=p.split(".");for(var q=0;q<p.length-1;q++){var C=p[q];C in n||(n[C]={});n=n[C]}p=p[p.length-1];q=n[p];v=v(q);v!=q&&null!=v&&fa(n,p,{configurable:!0,writable:!0,value:v})}}
function t(p){function v(q){return p.next(q)}function n(q){return p.throw(q)}return new Promise(function(q,C){function G(H){H.done?q(H.value):Promise.resolve(H.value).then(v,n).then(G,C)}G(p.next())})}ha("Array.prototype.includes",function(p){return p?p:function(v,n){var q=this;q instanceof String&&(q=String(q));var C=q.length;n=n||0;for(0>n&&(n=Math.max(n+C,0));n<C;n++){var G=q[n];if(G===v||Object.is(G,v))return!0}return!1}});
(function(){function p(a){return{position:a.position,D:a.is_mega,G:a.song_id,L:a.song_title,u:a.artist_name,v:a.preview_url,s:a.num_votes,Za:a.artwork_filename,backgroundColor:a.background_color,S:a.model_applied,ba:a.num_votes_orig,V:a.rank_orig}}function v(a){return new Promise(b=>{window.setTimeout(()=>b(),a)})}function n(a){let b=document.createElement("div");b.innerHTML=a;return b.firstChild}function q(a,b,c,d,g,e,f){return t(function*(){try{var B=yield a.cb()}catch(E){if(E instanceof U)return;
console.error(E);return}let I=V.render(),F=W.render();B=X.render(B,g,e);let x=h.b(c.parentNode);x.insertBefore(I.a,c);x.insertBefore(F.a,c);x.insertBefore(B.a,c);(new ia(B,I,F,d,a,b,f)).ha()}())}function C(a){try{localStorage.setItem("test","test");localStorage.removeItem("test");var b=!0}catch(c){b=!1}!b||17069184E5<Date.now()||(b=window.localStorage.getItem("100wt-donation-diag"),null!=b&&parseInt(b)>Date.now()||window.setTimeout(()=>ja(a),1E3*(45+Math.round(30*Math.random()))))}function G(){let a=
Date.now();return 17063136E5>a?Math.min(a+6048E5,17063136E5):a+6048E5}function H(){localStorage.setItem("100wt-donation-diag",String(G()))}function ja(a){function b(){document.body.classList.remove("noscroll");c.classList.remove("dialog--visible");window.setTimeout(()=>{c.remove()},200)}let c=document.createElement("div");c.classList.add("dialog");c.innerHTML='\n    <div class="dialog__content">\n       <img class="dialog__heroImg" src="/static/client/coffeecup.svg" alt="" /> \n       <h2>Enjoying The Predictions?&nbsp;\ud83d\udd25</h2>\n       <p>100 Warm Tunas involves a handful of server and 3rd party vendor costs, so a\n       small contribution will help to keep 100 Warm Tunas running for years to come.</p>\n       <p>You can show your support by buying me a coffee&nbsp;\u2615\ufe0f</p>\n       <div>\n       <a href="https://www.buymeacoffee.com/nickw444" target="_blank" rel="noreferrer nofollow" class="dialog__cta dialog__cta--brand" id="buyCoffeeCta">\n          Buy me a coffee&nbsp;\u2615\ufe0f\n       </a>\n      <button href="#" class="dialog__cta" id="noThanksCta">\n        No thanks\n      </button>\n      </div>\n    </div>\n  ';
h.b(c.querySelector("#noThanksCta")).addEventListener("click",()=>{a.va("no_thanks");b();H()});h.b(c.querySelector("#buyCoffeeCta")).addEventListener("click",()=>{a.va("buy_coffee");b();H()});let d=h.b(c.querySelector(".dialog__content")),g=0;c.addEventListener("click",e=>{let f=d.getBoundingClientRect();if(e.clientY<f.top||e.clientY>f.bottom||e.clientX<f.left||e.clientX>f.right)g++,1<g&&(a.va("backdrop"),b(),H())});document.body.appendChild(c);document.body.classList.add("noscroll");window.requestAnimationFrame(()=>
{c.classList.add("dialog--visible");a.Tb()})}function ka(){la();let a=h.b(document.querySelector(".header")),b=new ma(a);b.i(1,()=>{document.body.classList.add("noscroll");b.Sa(!0)});b.i(2,()=>{document.body.classList.remove("noscroll");b.Sa(!1)})}function la(){let a;window.addEventListener("resize",()=>{document.body.classList.add("resizing");window.clearTimeout(a);a=window.setTimeout(()=>document.body.classList.remove("resizing"),200)})}function na(){let a=document.querySelector(".hero__viewCountdownCta"),
b=document.querySelector(".countdown");a&&b&&a.addEventListener("click",()=>{oa({top:b.offsetTop-32,behavior:"smooth"})})}function pa(){"Australia/Sydney"!==Intl.DateTimeFormat().resolvedOptions().timeZone&&document.querySelectorAll(".localTime").forEach(a=>{let b=parseInt(y.w(a.dataset,"ts"),10);a.innerText=`(${(new Date(1E3*b)).toLocaleString(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"})} in your time zone)`})}function M(a){return 0<a.touches.length?a.touches[0]:void 0}function qa(a,
b){let c=new ra(h.b(document.querySelector(".player")));new sa(a,c,b)}function Y(a,b){a=h.b(P(a,b,"result"));return new Q(a)}function P(a,b,c){for(;a&&a!==b;){if(a.classList.contains(c))return a;a=a.parentNode}}function ta(a){a=new ua(a);let b=new va(a);return{sa:a,o:b}}function Z(a,b,c,d){return t(function*(){function g(m){x?E&&(E.style.display=m?"block":"none"):c&&c.W(m)}function e(){function m(){var z;let L=null===(z=u.files)||void 0===z?void 0:z.item(0);null!=L&&null!=D&&f({file:L,ia:D,Lb:wa,
Jb:xa,Fb:A})}function A(){u.value="";D=void 0}let r=document.createElement("div");var k=document.createElement("p");k.innerHTML=x?"Help us make a more accurate prediction \ud83d\udd25. Submit your votes by uploading them below:":"<strong>Want a sneak peek?</strong> Upload a screenshot of your votes to take a look:";r.appendChild(k);let l=document.createElement("form");l.classList.add("votesUploaderForm");r.appendChild(l);k=document.createElement("label");k.setAttribute("for","fileInput");k.innerHTML=
'\n    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path></svg>\n    <span>Choose a file\u2026</span>\n';l.appendChild(k);let u=document.createElement("input");u.type="file";u.name="upload";u.accept="image/*";
u.id="fileInput";l.appendChild(u);let D=void 0;u.addEventListener("change",()=>m());let J=document.createElement("div");J.classList.add("turnstile");l.appendChild(J);window.turnstile.ready(function(){window.turnstile.render(J,{sitekey:"0x4AAAAAAA4L8anHMeSmbvID",appearance:"interaction-only",callback:function(z){D=z;m()}})});k=void 0;x&&(k=document.createElement("div"),k.classList.add("loader"),k.innerHTML='<span class="countdown__statusIcon icon-spinner"></span>',k.style.display="none",r.appendChild(k));
let w=document.createElement("div");w.classList.add("votesUploaderFormError");r.appendChild(w);let xa=z=>{if(z){const L=document.createElement("p");L.innerText=z;w.appendChild(L);turnstile.reset()}else w.innerHTML=""};if(x){let z=document.createElement("p");z.innerHTML='You can also submit your votes by sending a screenshot of your votes as a direct message to\n<a target="_blank" rel="noreferrer nofollow" class="hero__link"\n   href="https://www.instagram.com/100warmtunas/">@100warmtunas</a>\non Instagram.';
r.appendChild(z)}let wa=z=>{z?l.classList.add("votesUploaderForm--hidden"):l.classList.remove("votesUploaderForm--hidden")};return{Vb:r,nb:k}}function f(m){var {file:A,ia:r,Jb:k,Lb:l,Fb:u}=m;return t(function*(){k(void 0);l(!0);g(!0);let D;try{D=yield d.ab({file:A,ia:r})}catch(w){throw w instanceof R?k("Something went wrong whilst verifying your submission. Please try again."):k("Something went wrong whilst processing your image. Please try again later."),l(!1),g(!1),u(),w;}let J=void 0;try{J=yield B({H:D.id,
l:D.l})}catch(w){throw l(!1),k("Something went wrong whilst processing your image. Please try again later."),g(!1),u(),w;}if(null!=J){switch(J){case "novotes":l(!1);k("We did not detect any valid votes in the image you uploaded. Please ensure you are uploading a screenshot of your vote confirmation from triple j.");break;case "timeout":l(!1),k("Something went wrong whilst processing your image. Please try again later.")}g(!1);u()}else{try{yield I({H:D.id,l:D.l})}catch(w){throw l(!1),k("Something went wrong whilst processing your image. Please try again later."),
g(!1),u(),w;}try{let w=yield d.Aa();F(w)}catch(w){throw k("Something went wrong whilst processing your image. Please try again later."),w;}finally{l(!1),g(!1),u()}}}())}function B(m){var {H:A,l:r}=m;return t(function*(){let k=void 0,l=Date.now();do{null!=k&&(yield ya(1E3));if(3E4<Date.now()-l)return"timeout";k=yield d.hb({H:A,l:r})}while("processed"!=k.state);if(0==k.Ia.length)return"novotes"}())}function I(m){var {H:A,l:r}=m;return t(function*(){yield d.Ab(new za(A,r))}())}function F(m){return t(function*(){let A=
m.results.length;if(!x&&0<A){a.innerHTML=`<strong>Thanks for submitting your votes</strong>. Here is your sneak peek of the top ${A}:`;c&&c.J(m.results.sort((l,u)=>u.position-l.position).map(l=>{if(null==l.K)throw Error("Song is not hydrated.");return{D:10<A&&10>=l.position,backgroundColor:l.K.Ya,v:l.K.v,G:0,position:l.position,L:l.K.title,u:l.K.u,s:l.Va,Wa:Math.round(l.Va/m.T*100),N:l.K.N,S:!1,V:void 0,ba:void 0}}));var r=document.createElement("p"),k="";null!=m.ma&&(k=`Data was last processed at ${(new Date(1E3*
m.ma)).toLocaleString(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"})}. `);r.innerText=`${k}Data is based on ${m.s} votes counted across ${m.T} entries.`;b&&b.Kb(r)}else a.innerHTML="Thanks for submitting your votes. This helps us build a more accurate prediction \ud83d\udc1f"}())}let x=null==b,E=void 0;try{g(!0);let m=yield d.Aa();F(m)}catch(m){if(m instanceof R){a.innerHTML="";let {Vb:A,nb:r}=e();E=r;a.appendChild(A)}else throw m;}finally{g(!1)}}())}function ya(a){return new Promise(b=>
{setTimeout(()=>b(void 0),a)})}function Aa(){let a=document.querySelector(".header__spotify");if(null!=a){var b=new IntersectionObserver(c=>{c[0].isIntersecting&&(N(()=>Ba(a)),b.disconnect())});b.observe(a)}}function Ba(a){let b=document.createElement("iframe");b.src=y.w(a.dataset,"spotifyEmbedUrl");b.width=b.height="300px";b.classList.add("header__spotifyEmbed");b.title="Spotify Embed";b.onload=()=>{b.classList.add("header__spotifyEmbed--loaded")};a.appendChild(b)}class Ca{constructor(a){this.P=
a}Ub(a,b,c,d){gtag("event","play",{send_to:this.P,event_category:"listen",event_action:"click",previewSrc:a,songId:b,songTitle:c,resultCurrentRank:d})}Rb(){gtag("event","controls_button_visible",{event_category:"controls"})}Sb(){gtag("event","controls_open",{event_category:"controls"})}Ta(a){gtag("event","controls_changed",{event_category:"controls",event_label:a.join(", ")})}Tb(){gtag("event","donation_dialog_show",{event_category:"donation_dialog"})}va(a){gtag("event","donation_dialog_click",
{event_category:"donation_dialog",event_action:"donation_dialog_click_"+a})}}class y{static w(a,b){return h.b(a[b])}static zb(a){return a.resultsUrlSlug}static Eb(a){return a(h.b(window.bootstrap))}static yb(a,b){return a[b]}static Oa(a,b){return y.yb(a,b)||!1}}class h{static b(a){if(null==a)throw Error("expected value");return a}}let N=window.requestIdleCallback||(a=>window.setTimeout(a,50));class S extends Error{}class Da extends S{}class O extends S{}class Ea extends O{}class R extends O{}class U extends O{}
class Fa{get(a,b){const c=this;return t(function*(){let d=yield fetch(a,Object.assign({},b,{credentials:"include"}));yield c.Ea(d);return yield d.json()}())}Na(a,b){const c=this;return t(function*(){let d=yield fetch(a,Object.assign({},b,{method:"POST",credentials:"include"}));yield c.Ea(d);return yield d.json()}())}Ea(a){return t(function*(){if(!(200<=a.status&&300>a.status)){var b="";if("application/json"===a.headers.get("Content-Type"))try{b=(yield a.json()).detail}catch(c){}switch(a.status){case 400:throw new Ea(b||
"Error: "+a.statusText);case 403:throw new R(b||"Error: "+a.statusText);case 404:throw new U(b||"Error: "+a.statusText);}if(400<=a.status&&500>a.status)throw new O(b||"Error: "+a.statusText);if(500<=a.status&&600>a.status)throw new Da(b||"Error: "+a.statusText);if(200>a.status||300<=a.status)throw new S(b||"Error: "+a.statusText);throw Error("Unhandled network error");}}())}}class ia{constructor(a,b,c,d,g,e,f){this.B=a;this.wa=b;this.ob=c;this.o=d;this.Hb=g;this.I=e;this.A=f;this.Fa=!1;this.pa=[];
a.i(1,B=>this.wb(B));b.i(1,()=>this.Ma(!this.B.lb()));c.i(1,()=>this.Ma(!1));this.pa=this.B.za()}ha(){this.o.xb(a=>{this.wa.Qb(a);a&&!this.Fa&&(this.I.Rb(),this.Fa=!0)})}wb(a){const b=this;return t(function*(){if(0===a.length)N(()=>b.I.Ta([])),b.o.J([]),b.o.Qa("No media types selected. Please select at least one media type."),b.oa=void 0;else{var c=b.B.za().filter(e=>!["modelled","exclude_placed"].includes(e)),d=a.filter(e=>!["modelled","exclude_placed"].includes(e));!b.pa.includes("modelled")&&a.includes("modelled")?
c.forEach(e=>{b.B.Pa(e,!0)}):c.length!=d.length&&a.includes("modelled")&&b.B.Pa("modelled",!1);a=b.B.Ba();b.pa=a;b.o.W(!0);b.o.J([]);var g=b.oa=v(500).then(()=>{if(g!==b.oa)throw new T;}).then(()=>{N(()=>b.I.Ta([...a].sort()));return b.Hb.fb(a)}).then(e=>{if(g!==b.oa)throw new T;b.o.W(!1);b.o.J(e.Gb.map(f=>({D:f.D,backgroundColor:f.backgroundColor,v:f.v,G:f.G,position:f.position,L:f.L,u:f.u,s:f.s,Wa:Math.floor(f.s/e.T*100),N:`/static/artwork/${b.A}/`+f.Za,S:f.S,V:f.V,ba:f.ba})))}).catch(e=>{if(!(e instanceof
T))throw b.o.Qa("An error occurred whilst fetching data. Please try again."),e;})}}())}Ma(a){a&&this.I.Sb();this.ob.toggle(a);this.B.toggle(a);this.wa.toggle(a)}}class T extends Error{}class K{constructor(a){this.a=a;this.ya={}}j(a,...b){(a=this.ya[a])&&a(...b)}i(a,b){this.ya[a]=b}}class X extends K{constructor(a){super(a);this.aa=h.b(a.querySelector(".controls__form--mediaTypes"));this.aa.addEventListener("change",()=>this.j(1,this.Ba()))}static render(a,b,c){a=n(`<div class="controls controls--hidden">
  <div class="container container--narrow">
    <h3>Included Media Types</h3>
    <p>Fine-tune the prediction by selecting the specific media types to be counted.</p>
    <form class="controls__form controls__form--mediaTypes">
      ${c?'<div style="padding-bottom: 8px; margin-bottom:8px; border-bottom:1px solid #eee;"><label><input value="modelled" type="checkbox" checked autocomplete="off"> Enable ML Model \ud83d\udd2e\u2728 (experimental, <a href="/news/2023/01/ml-model-result-adjustment/" target="_blank">learn more</a>)</label></div>':""}
      ${b?'<div><label><input value="exclude_placed" type="checkbox" checked autocomplete="off"> Eliminate songs that have placed in the Hottest 200-101</label></div>':""}
      <div><label><input value="instagram_post" type="checkbox" checked autocomplete="off"> Instagram Posts <span class="controls__formMeta">(${a.kb} entries)</span></label>
      </div>
      <div><label><input value="instagram_direct_message" type="checkbox" checked autocomplete="off"> Instagram DMs <span class="controls__formMeta">(${a.jb} entries)</span></label>
      </div>
      ${a.Ga?`<div><label><input value="instagram_story" type="checkbox" checked autocomplete="off"> Instagram Stories <span class="controls__formMeta">(${a.Ga} entries)</span></label></div>`:""}
      ${a.Ua?`<div><label><input value="twitter_post" type="checkbox" checked autocomplete="off"> Twitter Posts <span class="controls__formMeta">(${a.Ua}  entries)</span></label></div>`:""}
      <div><label><input value="reddit_comment" type="checkbox" checked autocomplete="off"> Reddit Comments <span class="controls__formMeta">(${a.Db}  entries)</span></label>
      </div>
      ${null!=a.Xa?`<div><label><input value="web_upload" type="checkbox" checked autocomplete="off"> Website Uploads <span class="controls__formMeta">(${a.Xa}  entries)</span></label></div>`:""}
    </form>
  </div>
</div>
`);return new X(a)}toggle(a){a?this.a.classList.remove("controls--hidden"):this.a.classList.add("controls--hidden")}lb(){return!this.a.classList.contains("controls--hidden")}Ba(){let a=[];this.aa.querySelectorAll('input[type="checkbox"]').forEach(b=>{b.checked&&a.push(b.value)});return a}za(){let a=[];this.aa.querySelectorAll('input[type="checkbox"]').forEach(b=>a.push(b.value));return a}Pa(a,b){h.b(this.aa.querySelector(`input[type="checkbox"][value="${a}"]`)).checked=b}}class V extends K{constructor(a){super(a);
a.addEventListener("click",()=>this.j(1))}static render(){let a=n('<div class="controls__buttonContainer controls__buttonContainer--hidden">\n  <button class="controls__button">\n    <span class="controls__icon icon-equalizer"></span>\n    <span class="controls__icon controls__icon--hidden icon-close"></span>\n  </button>\n</div>');return new V(a)}Qb(a){a?this.a.classList.remove("controls__buttonContainer--hidden"):this.a.classList.add("controls__buttonContainer--hidden")}toggle(a){let b=h.b(this.a.querySelector(".controls__icon.icon-equalizer")),
c=h.b(this.a.querySelector(".controls__icon.icon-close"));a?(b.classList.add("controls__icon--hidden"),c.classList.remove("controls__icon--hidden")):(b.classList.remove("controls__icon--hidden"),c.classList.add("controls__icon--hidden"))}}class W extends K{constructor(a){super(a);a.addEventListener("click",()=>this.j(1))}static render(){let a=n('<div class="controls__mask controls__mask--hidden"></div>');return new W(a)}toggle(a){a?(this.a.classList.remove("controls__mask--hidden"),document.body.classList.add("noscroll")):
(this.a.classList.add("controls__mask--hidden"),document.body.classList.remove("noscroll"))}}class ma extends K{constructor(a){super(a);this.pb=h.b(this.a.querySelector(".header__navList"));this.Ha=h.b(this.a.querySelector(".header__navListMask"));a=h.b(this.a.querySelector(".header__hamburgerButton"));let b=h.b(this.a.querySelector(".header__navListClose"));a.addEventListener("click",()=>this.j(1));[this.Ha,b].forEach(c=>c.addEventListener("click",()=>this.j(2)))}Sa(a){this.toggle(this.pb,a,"header__navList--visible");
this.toggle(this.Ha,a,"header__navListMask--visible")}toggle(a,b,c){b?a.classList.add(c):a.classList.remove(c)}}let Ga=a=>{function b(){window.requestAnimationFrame(()=>{const e=Math.max(Math.min((Date.now()-g)/300,1),0);window.scrollTo(window.scrollX,c+(.5>e?2*e*e:-1+(4-2*e)*e)*d);1>e&&b()})}({top:a}=a);let c=window.scrollY;const d=a-c,g=Date.now();b()},oa="scrollBehavior"in document.documentElement.style?window.scrollTo:Ga;console.log();class aa{constructor(a){var {P:b,A:c,ja:d,ka:g}=a;this.P=b;
this.A=c;this.ja=d;this.ka=g}static h(a){return new aa({P:y.w(a,"gaMeasurementId"),A:y.zb(a),ja:y.Oa(a,"enableExcludePlacedControl"),ka:y.Oa(a,"enableModelControl")})}}class sa{constructor(a,b,c){this.I=a;this.c=b;this.sa=c;this.F=1;this.f=void 0;this.c.i(1,()=>this.tb());this.c.i(3,()=>this.vb());this.c.i(2,()=>this.ub());this.c.i(4,()=>this.Da(h.b(this.f),!0));this.c.i(6,d=>this.c.ta(d));this.c.i(5,d=>this.c.Nb(d));this.sa.i(1,this.Da.bind(this))}Da(a,b){if(this.f&&this.f.xa(a))switch(this.F){case 3:return this.resume();
case 2:return b&&this.pause();default:return}this.play(a)}play(a){if(!this.f||!this.f.xa(a)){this.F=2;null!=this.f&&this.f.Ra();this.f=a;a.play();var {ga:b,Bb:c,fa:d,Cb:g,G:e,title:f}=a.gb();this.c.Ob(c);this.c.ta(0);this.c.play();this.c.Mb({ga:b,title:f,fa:d});this.c.show();this.I.Ub(c,e,`${f} - ${d}`,g)}}pause(){this.F=3;this.c.pause()}resume(){this.F=2;this.c.play()}tb(){null!=this.f&&(this.F=1,this.f.Ra(),this.c.ib(),this.f=void 0)}ub(){null!=this.f&&(this.F=3,this.f.pause())}vb(){null!=this.f&&
(this.F=2,this.f.resume())}}class ra extends K{constructor(a){super(a);this.g=void 0;this.R=!1;this.m=h.b(a.querySelector("audio"));this.M=h.b(this.a.querySelector(".player__artworkPlayButton span"));this.ra=h.b(this.a.querySelector(".player__progressIndicator"));this.m.onended=()=>this.j(1);this.m.onpause=()=>this.j(2);this.m.onplay=()=>this.j(3);this.m.ontimeupdate=()=>!this.R&&this.j(6,this.m.currentTime/this.m.duration);h.b(this.a.querySelector(".player__artworkPlayButton")).addEventListener("click",
()=>this.j(4));this.qa=h.b(this.a.querySelector(".player__progress"));this.qa.addEventListener("mousedown",b=>0===b.button&&this.ca(b));this.qa.addEventListener("touchstart",b=>this.ca(M(b)),{passive:!0});this.ra.addEventListener("mousedown",b=>0===b.button&&this.ca(b));this.ra.addEventListener("touchstart",b=>this.ca(M(b)),{passive:!0});window.addEventListener("mousemove",b=>this.Ka(b));window.addEventListener("touchmove",b=>this.Ka(M(b)),{passive:!0});window.addEventListener("mouseup",b=>this.La(b));
window.addEventListener("touchend",b=>this.La(M(b)),{passive:!0})}ca(a){document.body.classList.add("dragging");this.R=!0;this.Z=this.la(h.b(a))}Ka(a){this.R&&(this.Z=this.la(h.b(a)),this.ta(this.Z))}La(a){this.R&&(document.body.classList.remove("dragging"),this.R=!1,a=null!=a?this.la(a):this.Z,this.Z=void 0,this.j(5,h.b(a)))}Ob(a){this.m.setAttribute("src",a)}Mb(a){var {ga:b,title:c,fa:d}=a;this.g||(this.g=document.createElement("img"),this.g.className="player__artworkImage",h.b(this.a.querySelector(".player__artwork")).appendChild(this.g));
b?this.g.src=b:(this.g.remove(),this.g=void 0);h.b(this.a.querySelector(".player__title")).innerText=c;h.b(this.a.querySelector(".player__artist")).innerText=d}pause(){this.M.className="icon-play2";this.m.pause()}play(){this.M.className="icon-pause";this.m.play()}show(){this.a.classList.remove("player--hidden");document.body.classList.add("hasPlayer")}ib(){this.a.classList.add("player--hidden");document.body.classList.remove("hasPlayer")}Nb(a){this.m.currentTime=a*this.m.duration}ta(a){this.ra.style.transform=
`translateX(calc(${-12+-12*a}px + ${100*a}%)`}la(a){let {left:b,width:c}=this.qa.getBoundingClientRect();return Math.max(Math.min((a.clientX-(b+6))/(c-12),1),0)}}class Ha{constructor(a,b){this.id=a;this.l=b}static h(a){return{id:a.id,l:a.accessToken}}}class Ia{constructor(a,b,c){this.id=a;this.state=b;this.Ia=c}static h(a){return{id:a.id,state:a.state,Ia:a.matchedVotes}}}class ba{constructor(a,b,c,d,g,e,f){this.id=a;this.title=b;this.u=c;this.v=d;this.N=g;this.Ya=f}static h(a){return new ba(a.id,
a.title,a.artistName,a.previewUrl,a.artworkUrl,a.artworkUrlLarge,a.artworkDominantColor)}}class ca{constructor(a,b,c,d,g,e,f){this.G=a;this.K=b;this.position=c;this.Va=f}static h(a){return new ca(a.songId,ba.h(a.song),a.position,a.positionOrig,a.positionUpper,a.positionLower,a.voteCount,a.voteCountScaled)}}class Ja{constructor(a,b,c,d){this.results=a;this.T=b;this.s=c;this.ma=d}static h(a){return{results:a.results.map(ca.h),T:a.numEntries,s:a.numVotes,ma:a.lastUpdated}}}class za{constructor(a,b){this.H=
a;this.l=b}}class Ka{constructor(a,b){this.C=a;this.X=b}ab(a){const b=this;return t(function*(){var c=new FormData;c.append("file",a.file);c.append("challengeToken",a.ia);c=yield b.C.Na(`${b.X}/api/submission/`,{body:c,headers:void 0});return Ha.h(c)}())}hb(a){const b=this;return t(function*(){let c=yield b.C.get(`${b.X}/api/submission/${a.H}`,{headers:{"Content-Type":"application/json","X-Access-Token":a.l}});return Ia.h(c)}())}Ab(a){const b=this;return t(function*(){yield b.C.Na(`${b.X}/api/submission/${a.H}/exchange`,
{headers:{"Content-Type":"application/json","X-Access-Token":a.l}});return{}}())}Aa(){const a=this;return t(function*(){let b=yield a.C.get(`${a.X}/api/prediction/current?fetchSongs=true`);return Ja.h(b)}())}}class va{constructor(a){this.view=a;this.U=new Map;this.na=new Set;a.i(2,this.rb.bind(this))}W(a){this.view.Ca().W(a)}Qa(a){this.view.Ca().Pb(a)}J(a){this.view.J(a);this.U.clear();this.na.clear()}xb(a){this.view.$a();this.view.i(3,a)}rb(a,b,c,d,g){b?this.U.has(c)||(a.Ib(),b=window.setTimeout(()=>
{this.na.has(c)||(this.na.add(c),a.mb(c,d),g())},200),this.U.set(c,b)):(window.clearInterval(this.U.get(c)),this.U.delete(c))}}class Q{constructor(a){this.a=a;this.M=this.a.querySelector(".result__artworkPlayButton span");this.g=h.b(this.a.querySelector(".result__artwork"))}static render(a){a=n(`<li class="result${a.D?" result--mega":""}"
      style="${a.D?`background: #${a.backgroundColor} radial-gradient(circle, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 100%)`:""}"
      data-preview-src="${a.v}"
      data-song-id="${a.G}"
      >
        <div class="container container--narrow">
          <div class="result__content">
            <div class="result__rankContainer">
              <div class="result__rank">${a.position}</div>
            </div>
            <div class="result__details">
              <div class="result__trackTitle">${a.L}</div>
              <div class="result__artistName">${a.u}</div>
              <div class="result__voteDetails">${a.ba||a.s}
                votes (${a.Wa}%)
                ${a.v?'\n                    &nbsp;&nbsp;|&nbsp;&nbsp;\n                    <button class="result__listenButton">\n                      <span class="icon-play2"></span>&nbsp;Listen\n                    </button>\n                ':""}
                ${!a.D&&a.S?`
                  &nbsp;&nbsp;|&nbsp;&nbsp;\u2728 ML Model Applied (was #${a.V})
                `:""}
              </div>
              ${a.D&&a.S?`
                <div class="result__voteBounds">
                  \u2728 ML Model Applied (was #${a.V})
                </div>
              `:""}
            </div>
            <div class="result__artwork">
                ${a.N?`
                <div class="result__artworkSpinner">
                    <div class="result__artworkPlaceholder"
                         data-alt="Cover artwork for ${a.L} - ${a.u}"
                         data-src="${a.N}"></div>
                  </div>
                  ${a.v?`
                  <button class="result__artworkPlayButton"
                            aria-label="Play ${a.L} by ${a.u}">
                      <span class="icon-play2"></span>
                    </button>
                  `:""}
                `:""}
            </div>
          </div>
        </div>
      </li>
`);return new Q(a)}xa(a){return this.a===a.a}gb(){return{Cb:this.a.querySelector(".result__rank").textContent,ga:this.bb(),G:y.w(this.a.dataset,"songId"),Bb:y.w(this.a.dataset,"previewSrc"),fa:this.a.querySelector(".result__artistName").textContent,title:this.a.querySelector(".result__trackTitle").textContent}}bb(){let a=this.a.querySelector(".result__artworkImage"),b=this.a.querySelector(".result__artworkPlaceholder");return null!=a?a.src:b?y.w(b.dataset,"src"):void 0}play(){this.g.classList.add("result__artwork--prePlay");
this.da("icon-pause");window.setTimeout(()=>{this.g.classList.add("result__artwork--playing")},300)}pause(){this.g.classList.add("result__artwork--paused");this.da("icon-play2")}resume(){this.g.classList.remove("result__artwork--paused");this.da("icon-pause")}Ra(){this.g.classList.add("result__artwork--fadeout");this.da("icon-play2");window.setTimeout(()=>{window.requestAnimationFrame(()=>{this.g.classList.remove("result__artwork--prePlay","result__artwork--playing");window.requestAnimationFrame(()=>
{this.g.classList.remove("result__artwork--fadeout")})})},350)}Ib(){h.b(this.a.querySelector(".result__artworkPlaceholder")).classList.add("result__artworkPlaceholder--loading")}mb(a,b){let c=h.b(this.a.querySelector(".result__artworkPlaceholder")),d=new Image;d.src=a;d.alt=b;d.classList.add("result__artworkImage","result__artworkImage--fadein");d.onload=()=>{c.parentNode.insertBefore(d,c);c.remove()};d.onerror=()=>{c.classList.remove("result__artworkPlaceholder--loading")}}da(a){this.M&&(this.M.className=
a)}}class da{constructor(a){this.a=a}static render(){let a=document.createElement("div");a.className="countdown__statusIndicator countdown__statusIndicator--hidden";return new da(a)}W(a){a?(this.ea(!0),this.a.innerHTML='<div class="countdown__statusIcon"><span class="icon-spinner"></span></div>'):this.ea(!1)}Pb(a){if(a){this.ea(!0);var b=document.createElement("div");b.className="countdown__statusMessage";b.innerText=a;this.a.innerHTML="";this.a.appendChild(b)}else this.ea(!1)}ea(a){a?this.a.classList.remove("countdown__statusIndicator--hidden"):
this.a.classList.add("countdown__statusIndicator--hidden")}}class ua extends K{constructor(a){super(a);this.$=h.b(this.a.querySelector(".countdown__list"))}ha(){this.a.addEventListener("click",a=>this.sb(a));this.Ja()}Ca(){this.ua||(this.ua=da.render(),this.a.insertBefore(this.ua.a,this.$));return this.ua}J(a){this.$.innerHTML="";for(let b of a)a=Q.render(b),this.$.appendChild(a.a);this.Ja()}Kb(a){null==this.O&&(this.O=document.createElement("div"),this.O.classList.add("container","container--narrow",
"countdown__footnote"),this.a.appendChild(this.O));this.O.innerHTML="";this.O.appendChild(a)}$a(){(new IntersectionObserver(a=>{a.length&&this.j(3,a[0].isIntersecting)},{rootMargin:"-96px 0px"})).observe(this.$)}sb(a){let b=P(a.target,this.a,"result__artworkPlayButton");a=P(a.target,this.a,"result__listenButton");if(a=b||a){let c=Y(a,this.a);this.j(1,c,a===b)}}Ja(){let a=this.eb();this.a.querySelectorAll(".result__artworkPlaceholder").forEach(b=>a.observe(b))}eb(){return this.Y?this.Y:this.Y=new IntersectionObserver(a=>
this.qb(h.b(this.Y),a))}qb(a,b){b.forEach(c=>{let d=c.target,g=Y(d,this.a),e=y.w(d.dataset,"src"),f=y.w(d.dataset,"alt");this.j(2,g,c.isIntersecting,e,f,()=>a.unobserve(d))})}}let La={h(a){return{T:a.num_entries,s:a.num_votes,Xb:a.numPreviousYearVotes,Wb:a.last_processed_ts,Gb:a.results_0_100.map(p)}}},Ma={h(a){return{kb:a.instagram_post,jb:a.instagram_direct_message,Ga:a.instagram_story,Ua:a.twitter_post,Db:a.reddit_comment,Xa:a.web_upload}}};class Na{constructor(a,b){this.C=a;this.A=b}fb(a){const b=
this;return t(function*(){var c=[...a].sort();c=yield b.C.get(`/static/results/${b.A}/`+c.join("+")+".json");return La.h(c)}())}cb(){const a=this;return t(function*(){let b=yield a.C.get(`/static/results/${a.A}/entryCountsBySource.json`);return Ma.h(b)}())}}document.addEventListener("DOMContentLoaded",function(){let {P:a,A:b,ja:c,ka:d}=y.Eb(aa.h),g=new Ca(a),e=document.querySelector(".countdown"),f=document.querySelector(".uploader"),B=document.querySelector(".uploaderRoot--installGa"),I=new Fa,F=
new Ka(I,window.location.href.includes("localhost")?"http://localhost:8000":"https://api.100warmtunas.com");B&&(B.classList.add("uploader","uploader--ga"),Z(B,void 0,void 0,F));if(null!=e){let {sa:x,o:E}=ta(e);qa(g,x);C(g);x.ha();null!=f&&Z(f,x,E,F);N(()=>{if(b){let m=new Na(I,b);q(m,g,e,E,c,d,b)}})}Aa();ka();na();pa()})})();
//# sourceMappingURL=a370af0a.js.map
