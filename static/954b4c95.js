'use strict';var v="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,Y="function"==typeof Object.defineProperties?Object.defineProperty:function(q,u,n){q!=Array.prototype&&q!=Object.prototype&&(q[u]=n.value)};function aa(q,u){if(u){var n=v;q=q.split(".");for(var r=0;r<q.length-1;r++){var y=q[r];y in n||(n[y]={});n=n[y]}q=q[q.length-1];r=n[q];u=u(r);u!=r&&null!=u&&Y(n,q,{configurable:!0,writable:!0,value:u})}}
function Z(q){function u(r){return q.next(r)}function n(r){return q.throw(r)}return new Promise(function(r,y){function C(D){D.done?r(D.value):Promise.resolve(D.value).then(u,n).then(C,y)}C(q.next())})}aa("Array.prototype.includes",function(q){return q?q:function(u,n){var r=this;r instanceof String&&(r=String(r));var y=r.length;n=n||0;for(0>n&&(n=Math.max(n+y,0));n<y;n++){var C=r[n];if(C===u||Object.is(C,u))return!0}return!1}});
(function(){function q(a){return{position:a.position,O:a.is_mega,J:a.song_id,A:a.song_title,s:a.artist_name,u:a.preview_url,l:a.num_votes,Ma:a.artwork_filename,backgroundColor:a.background_color}}function u(a){return new Promise(b=>{window.setTimeout(()=>b(),a)})}function n(a){let b=document.createElement("div");b.innerHTML=a;return b.firstChild}function r(a,b,c,d,e,k){return Z(function*(){try{var m=yield a.Qa()}catch(x){if(x instanceof O)return;console.error(x);return}let A=P.v(),E=Q.v();m=R.v(m,
e);let z=f.b(c.parentNode);z.insertBefore(A.a,c);z.insertBefore(E.a,c);z.insertBefore(m.a,c);(new ba(m,A,E,d,a,b,k)).da()}())}function y(a){try{localStorage.setItem("test","test");localStorage.removeItem("test");var b=!0}catch(c){b=!1}b&&(b=window.localStorage.getItem("100wt-donation-diag"),null!=b&&parseInt(b)>Date.now()||window.setTimeout(()=>ca(a),1E3*(45+Math.round(30*Math.random()))))}function C(){let a=Date.now();return 16747722E5>a?Math.min(a+6048E5,16747722E5):1674864E6>a?1674864E6:a+6048E5}
function D(){console.log(C());localStorage.setItem("100wt-donation-diag",String(C()))}function ca(a){function b(){document.body.classList.remove("noscroll");c.classList.remove("dialog--visible");window.setTimeout(()=>{c.remove()},200)}let c=document.createElement("div");c.classList.add("dialog");c.innerHTML='\n    <div class="dialog__content">\n       <img class="dialog__heroImg" src="/static/client/coffeecup.svg" alt="" /> \n       <h2>Enjoying The Predictions?&nbsp;\ud83d\udd25</h2>\n       <p>100 Warm Tunas involves a handful of server and 3rd party vendor costs, so a\n       small contribution will help to keep 100 Warm Tunas running for years to come.</p>\n       <p>You can show your support by buying me a coffee&nbsp;\u2615\ufe0f</p>\n       <div>\n       <a href="https://www.buymeacoffee.com/nickw444" target="_blank" rel="noreferrer nofollow" class="dialog__cta dialog__cta--brand" id="buyCoffeeCta">\n          Buy me a coffee&nbsp;\u2615\ufe0f\n       </a>\n      <button href="#" class="dialog__cta" id="noThanksCta">\n        No thanks\n      </button>\n      </div>\n    </div>\n  ';
f.b(c.querySelector("#noThanksCta")).addEventListener("click",()=>{a.oa("no_thanks");b();D()});f.b(c.querySelector("#buyCoffeeCta")).addEventListener("click",()=>{a.oa("buy_coffee");b();D()});let d=f.b(c.querySelector(".dialog__content")),e=0;c.addEventListener("click",k=>{let m=d.getBoundingClientRect();if(k.clientY<m.top||k.clientY>m.bottom||k.clientX<m.left||k.clientX>m.right)e++,1<e&&(a.oa("backdrop"),b(),D())});document.body.appendChild(c);document.body.classList.add("noscroll");window.requestAnimationFrame(()=>
{c.classList.add("dialog--visible");a.Nb()})}function da(){ea();let a=f.b(document.querySelector(".header")),b=new fa(a);b.h(1,()=>{document.body.classList.add("noscroll");b.Ia(!0)});b.h(2,()=>{document.body.classList.remove("noscroll");b.Ia(!1)})}function ea(){let a;window.addEventListener("resize",()=>{document.body.classList.add("resizing");window.clearTimeout(a);a=window.setTimeout(()=>document.body.classList.remove("resizing"),200)})}function ha(){let a=document.querySelector(".hero__viewCountdownCta"),
b=document.querySelector(".countdown");a&&b&&a.addEventListener("click",()=>{ia({top:b.offsetTop-32,behavior:"smooth"})})}function ja(){"Australia/Sydney"!==Intl.DateTimeFormat().resolvedOptions().timeZone&&document.querySelectorAll(".localTime").forEach(a=>{let b=parseInt(w.B(a.dataset,"ts"),10);a.innerText=`(${(new Date(1E3*b)).toLocaleString(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"})} in your time zone)`})}function J(a){return 0<a.touches.length?a.touches[0]:void 0}function ka(a,
b){let c=new la(f.b(document.querySelector(".player")));new ma(a,c,b)}function S(a,b){a=f.b(L(a,b,"result"));return new M(a)}function L(a,b,c){for(;a&&a!==b;){if(a.classList.contains(c))return a;a=a.parentNode}}function na(a){a=new oa(a);let b=new pa(a);return{la:a,o:b}}function T(a,b,c,d){return Z(function*(){function e(l){x?H&&(H.style.display=l?"block":"none"):c&&c.S(l)}function k(){let l=document.createElement("div");var g=document.createElement("p");g.innerHTML=x?"Help us make a more accurate prediction \ud83d\udd25. Submit your votes by uploading them below:":
"<strong>Want a sneak peek?</strong> Upload a screenshot of your votes to take a look:";l.appendChild(g);let p=document.createElement("form");p.classList.add("votesUploaderForm");l.appendChild(p);g=document.createElement("label");g.setAttribute("for","fileInput");g.innerHTML='\n    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path></svg>\n    <span>Choose a file\u2026</span>\n';
p.appendChild(g);g=document.createElement("input");g.type="file";g.name="upload";g.accept="image/*";g.id="fileInput";p.appendChild(g);g.addEventListener("change",t=>m(t,{Db:F,Bb:B}));g=void 0;x&&(g=document.createElement("div"),g.classList.add("loader"),g.innerHTML='<span class="countdown__statusIcon icon-spinner"></span>',g.style.display="none",l.appendChild(g));let h=document.createElement("div");h.classList.add("votesUploaderFormError");l.appendChild(h);let B=t=>{if(t){const U=document.createElement("p");
U.innerText=t;h.appendChild(U)}else h.innerHTML=""};if(x){let t=document.createElement("p");t.innerHTML='You can also submit your votes by posting a screenshot and tagging it with\n<a target="_blank"\n   class="hero__link"\n   href="https://www.instagram.com/explore/tags/hottest100/">#hottest100</a>\non a public Instagram account, or send as a direct message to\n<a target="_blank" rel="noreferrer nofollow" class="hero__link"\n   href="https://www.instagram.com/100warmtunas/">@100warmtunas</a>\non Instagram.';
l.appendChild(t)}let F=t=>{t?p.classList.add("votesUploaderForm--hidden"):p.classList.remove("votesUploaderForm--hidden")};return{Qb:l,cb:g}}function m(l,g){var {Bb:p,Db:h}=g;return Z(function*(){p(void 0);h(!0);e(!0);var B=f.b(f.b(l.target.files).item(0));let F;try{F=yield d.Oa({file:B})}catch(t){throw h(!1),p("Something went wrong whilst processing your image. Please try again later."),e(!1),t;}B=void 0;try{B=yield A({id:F.id,w:F.w})}catch(t){throw h(!1),p("Something went wrong whilst processing your image. Please try again later."),
e(!1),t;}if(null!=B){switch(B){case "novotes":h(!1);p("We did not detect any valid votes in the image you uploaded. Please ensure you are uploading a screenshot of your vote confirmation from triple j.");break;case "unknown":h(!1),p("Something went wrong whilst processing your image. Please try again later.")}e(!1)}else{try{yield E({id:F.id,w:F.w})}catch(t){throw h(!1),p("Something went wrong whilst processing your image. Please try again later."),e(!1),t;}try{let t=yield d.V();z(t)}catch(t){throw p("Something went wrong whilst processing your image. Please try again later."),
t;}finally{h(!1),e(!1)}}}())}function A(l){var {id:g,w:p}=l;return Z(function*(){let h=void 0;do null!=h&&(yield qa(1E3)),h=yield d.Ua({id:g,w:p});while("COMPLETE"!=h.state);if(null!=h.ua||null!=h.pa)return"unknown";if(!h.ya)return"novotes"}())}function E(l){var {id:g,w:p}=l;return Z(function*(){yield d.rb(new ra(void 0,g,p))}())}function z(l){return Z(function*(){let g=l.results.length;a.innerHTML=x?"Thanks for submitting your votes. This helps us build a more accurate prediction \ud83d\udc1f":`<strong>Thanks for submitting your votes</strong>. Here is your sneak peek of the top ${g}:`;
c&&c.I(l.results.sort((h,B)=>B.position-h.position).map(h=>({O:10<g&&10>=h.position,backgroundColor:h.backgroundColor,u:h.u,J:0,position:h.position,A:h.A,s:h.s,l:h.l,Ka:Math.round(h.l/l.P.Y*100),H:h.H})));let p=document.createElement("p");p.innerText=`Data was last processed at ${(new Date(1E3*l.P.$a)).toLocaleString(void 0,{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"})}. Data is based on ${l.P.l} votes counted across ${l.P.Y} entries.`;b&&b.Cb(p)}())}let x=null==b,H=void 0;try{e(!0);
let l=yield d.V();z(l)}catch(l){if(l instanceof V){let {Qb:g,cb:p}=k();H=p;a.appendChild(g)}}finally{e(!1)}}())}function qa(a){return new Promise(b=>{setTimeout(()=>b(),a)})}function sa(){let a=document.querySelector(".header__spotify");if(null!=a){var b=new IntersectionObserver(c=>{c[0].isIntersecting&&(K(()=>ta(a)),b.disconnect())});b.observe(a)}}function ta(a){let b=document.createElement("iframe");b.src=w.B(a.dataset,"spotifyEmbedUrl");b.width=b.height="300px";b.classList.add("header__spotifyEmbed");
b.title="Spotify Embed";b.onload=()=>{b.classList.add("header__spotifyEmbed--loaded")};a.appendChild(b)}class ua{constructor(a){this.M=a}Ob(a,b,c,d){gtag("event","play",{send_to:this.M,event_category:"listen",event_action:"click",previewSrc:a,songId:b,songTitle:c,resultCurrentRank:d})}Lb(){gtag("event","controls_button_visible",{event_category:"controls"})}Mb(){gtag("event","controls_open",{event_category:"controls"})}Ja(a){gtag("event","controls_changed",{event_category:"controls",
event_label:a.join(", ")})}Nb(){gtag("event","donation_dialog_show",{event_category:"donation_dialog"})}oa(a){gtag("event","donation_dialog_click",{event_category:"donation_dialog",event_action:"donation_dialog_click_"+a})}}class w{static B(a,b){return f.b(a[b])}static qb(a){return a.resultsUrlSlug}static wb(a){return a(f.b(window.bootstrap))}static pb(a){return a.enableExcludePlacedControl}static vb(a){return w.pb(a)||!1}}class f{static b(a){if(null==a)throw Error("expected value");return a}}let K=
window.requestIdleCallback||(a=>window.setTimeout(a,50));class I extends Error{}class va extends I{}class wa extends I{}class V extends I{}class O extends I{}class xa{get(a){const b=this;return Z(function*(){let c=yield fetch(a,{credentials:"include"});b.xa(c);return yield c.json()}())}ia(a,b){const c=this;return Z(function*(){let d=yield fetch(a,Object.assign({},b,{method:"POST",credentials:"include"}));c.xa(d);return yield d.json()}())}xa(a){switch(a.status){case 403:throw new V("Error: "+a.statusText);
case 404:throw new O("Error: "+a.statusText);}if(400<=a.status&&500>a.status)throw new wa("Error: "+a.statusText);if(500<=a.status&&600>a.status)throw new va("Error: "+a.statusText);if(200>a.status||300<=a.status)throw new I("Error: "+a.statusText);}}class ba{constructor(a,b,c,d,e,k,m){this.ra=a;this.qa=b;this.eb=c;this.o=d;this.yb=e;this.G=k;this.C=m;this.za=!1;a.h(1,A=>this.nb(A));b.h(1,()=>this.Fa(!this.ra.Za()));c.h(1,()=>this.Fa(!1))}da(){this.o.ob(a=>{this.qa.Kb(a);a&&!this.za&&(this.G.Lb(),
this.za=!0)})}nb(a){const b=this;return Z(function*(){if(0===a.length)K(()=>b.G.Ja([])),b.o.I([]),b.o.Ga("No media types selected. Please select at least one media type."),b.ha=void 0;else{b.o.S(!0);b.o.I([]);var c=b.ha=u(500).then(()=>{if(c!==b.ha)throw new N;}).then(()=>{K(()=>b.G.Ja([...a].sort()));return b.yb.V(a)}).then(d=>{if(c!==b.ha)throw new N;b.o.S(!1);b.o.I(d.xb.map(e=>({O:e.O,backgroundColor:e.backgroundColor,u:e.u,J:e.J,position:e.position,A:e.A,s:e.s,l:e.l,Ka:Math.floor(e.l/d.Y*100),
H:`/static/artwork/${b.C}/`+e.Ma})))}).catch(d=>{if(!(d instanceof N))throw b.o.Ga("An error occurred whilst fetching data. Please try again."),d;})}}())}Fa(a){a&&this.G.Mb();this.eb.toggle(a);this.ra.toggle(a);this.qa.toggle(a)}}class N extends Error{}class G{constructor(a){this.a=a;this.ta={}}i(a,...b){(a=this.ta[a])&&a(...b)}h(a,b){this.ta[a]=b}}class R extends G{constructor(a){super(a);this.Ba=f.b(a.querySelector(".controls__form--mediaTypes"));this.Ba.addEventListener("change",()=>this.i(1,this.Sa()))}static v(a,
b){a=n(`<div class="controls controls--hidden">
  <div class="container container--narrow">
    <h3>Included Media Types</h3>
    <p>Fine-tune the prediction by selecting the specific media types to be counted.</p>
    <form class="controls__form controls__form--mediaTypes">
      ${b?'<div><label><input value="exclude_placed" type="checkbox" checked autocomplete="off"> Eliminate songs that have placed in the Hottest 200-101</label></div>':""}
      <div><label><input value="instagram_post" type="checkbox" checked autocomplete="off"> Instagram Posts <span class="controls__formMeta">(${a.Xa} entries)</span></label>
      </div>
      <div><label><input value="instagram_direct_message" type="checkbox" checked autocomplete="off"> Instagram DMs <span class="controls__formMeta">(${a.Wa} entries)</span></label>
      </div>
      <div><label><input value="instagram_story" type="checkbox" checked autocomplete="off"> Instagram Stories <span
          class="controls__formMeta">(${a.Ya} entries)</span></label></div>
      <div><label><input value="twitter_post" type="checkbox" checked autocomplete="off"> Twitter Posts <span class="controls__formMeta">(${a.Pb}  entries)</span></label>
      </div>
      <div><label><input value="reddit_comment" type="checkbox" checked autocomplete="off"> Reddit Comments <span class="controls__formMeta">(${a.ub}  entries)</span></label>
      </div>
      ${null!=a.La?`<div><label><input value="web_upload" type="checkbox" checked autocomplete="off"> Website Uploads <span class="controls__formMeta">(${a.La}  entries)</span></label></div>`:""}
    </form>
  </div>
</div>
`);return new R(a)}toggle(a){a?this.a.classList.remove("controls--hidden"):this.a.classList.add("controls--hidden")}Za(){return!this.a.classList.contains("controls--hidden")}Sa(){let a=[];this.Ba.querySelectorAll('input[type="checkbox"]').forEach(b=>{b.checked&&a.push(b.value)});return a}}class P extends G{constructor(a){super(a);a.addEventListener("click",()=>this.i(1))}static v(){let a=n('<div class="controls__buttonContainer controls__buttonContainer--hidden">\n  <button class="controls__button">\n    <span class="controls__icon icon-equalizer"></span>\n    <span class="controls__icon controls__icon--hidden icon-close"></span>\n  </button>\n</div>');
return new P(a)}Kb(a){a?this.a.classList.remove("controls__buttonContainer--hidden"):this.a.classList.add("controls__buttonContainer--hidden")}toggle(a){let b=f.b(this.a.querySelector(".controls__icon.icon-equalizer")),c=f.b(this.a.querySelector(".controls__icon.icon-close"));a?(b.classList.add("controls__icon--hidden"),c.classList.remove("controls__icon--hidden")):(b.classList.remove("controls__icon--hidden"),c.classList.add("controls__icon--hidden"))}}class Q extends G{constructor(a){super(a);a.addEventListener("click",
()=>this.i(1))}static v(){let a=n('<div class="controls__mask controls__mask--hidden"></div>');return new Q(a)}toggle(a){a?(this.a.classList.remove("controls__mask--hidden"),document.body.classList.add("noscroll")):(this.a.classList.add("controls__mask--hidden"),document.body.classList.remove("noscroll"))}}class fa extends G{constructor(a){super(a);this.fb=f.b(this.a.querySelector(".header__navList"));this.Aa=f.b(this.a.querySelector(".header__navListMask"));a=f.b(this.a.querySelector(".header__hamburgerButton"));
let b=f.b(this.a.querySelector(".header__navListClose"));a.addEventListener("click",()=>this.i(1));[this.Aa,b].forEach(c=>c.addEventListener("click",()=>this.i(2)))}Ia(a){this.toggle(this.fb,a,"header__navList--visible");this.toggle(this.Aa,a,"header__navListMask--visible")}toggle(a,b,c){b?a.classList.add(c):a.classList.remove(c)}}let ya=a=>{function b(){window.requestAnimationFrame(()=>{const k=Math.max(Math.min((Date.now()-e)/300,1),0);window.scrollTo(window.scrollX,c+(.5>k?2*k*k:-1+(4-2*k)*k)*
d);1>k&&b()})}({top:a}=a);let c=window.scrollY;const d=a-c,e=Date.now();b()},ia="scrollBehavior"in document.documentElement.style?window.scrollTo:ya;console.log();class W{constructor(a){var {M:b,C:c,ea:d}=a;this.M=b;this.C=c;this.ea=d}static j(a){return new W({M:w.B(a,"gaMeasurementId"),C:w.qb(a),ea:w.vb(a)})}}class ma{constructor(a,b,c){this.G=a;this.c=b;this.la=c;this.F=1;this.f=void 0;this.c.h(1,()=>this.kb());this.c.h(3,()=>this.mb());this.c.h(2,()=>this.lb());this.c.h(4,()=>this.wa(f.b(this.f),
!0));this.c.h(6,d=>this.c.ma(d));this.c.h(5,d=>this.c.Fb(d));this.la.h(1,this.wa.bind(this))}wa(a,b){if(this.f&&this.f.sa(a))switch(this.F){case 3:return this.resume();case 2:return b&&this.pause();default:return}this.play(a)}play(a){if(!this.f||!this.f.sa(a)){this.F=2;null!=this.f&&this.f.Ha();this.f=a;a.play();var {ca:b,sb:c,ba:d,tb:e,J:k,title:m}=a.Ta();this.c.Gb(c);this.c.ma(0);this.c.play();this.c.Eb({ca:b,title:m,ba:d});this.c.show();this.G.Ob(c,k,`${m} - ${d}`,e)}}pause(){this.F=3;this.c.pause()}resume(){this.F=
2;this.c.play()}kb(){null!=this.f&&(this.F=1,this.f.Ha(),this.c.Va(),this.f=void 0)}lb(){null!=this.f&&(this.F=3,this.f.pause())}mb(){null!=this.f&&(this.F=2,this.f.resume())}}class la extends G{constructor(a){super(a);this.g=void 0;this.N=!1;this.m=f.b(a.querySelector("audio"));this.K=f.b(this.a.querySelector(".player__artworkPlayButton span"));this.ka=f.b(this.a.querySelector(".player__progressIndicator"));this.m.onended=()=>this.i(1);this.m.onpause=()=>this.i(2);this.m.onplay=()=>this.i(3);this.m.ontimeupdate=
()=>!this.N&&this.i(6,this.m.currentTime/this.m.duration);f.b(this.a.querySelector(".player__artworkPlayButton")).addEventListener("click",()=>this.i(4));this.ja=f.b(this.a.querySelector(".player__progress"));this.ja.addEventListener("mousedown",b=>0===b.button&&this.Z(b));this.ja.addEventListener("touchstart",b=>this.Z(J(b)),{passive:!0});this.ka.addEventListener("mousedown",b=>0===b.button&&this.Z(b));this.ka.addEventListener("touchstart",b=>this.Z(J(b)),{passive:!0});window.addEventListener("mousemove",
b=>this.Da(b));window.addEventListener("touchmove",b=>this.Da(J(b)),{passive:!0});window.addEventListener("mouseup",b=>this.Ea(b));window.addEventListener("touchend",b=>this.Ea(J(b)),{passive:!0})}Z(a){document.body.classList.add("dragging");this.N=!0;this.W=this.fa(f.b(a))}Da(a){this.N&&(this.W=this.fa(f.b(a)),this.ma(this.W))}Ea(a){this.N&&(document.body.classList.remove("dragging"),this.N=!1,a=null!=a?this.fa(a):this.W,this.W=void 0,this.i(5,f.b(a)))}Gb(a){this.m.setAttribute("src",a)}Eb(a){var {ca:b,
title:c,ba:d}=a;this.g||(this.g=document.createElement("img"),this.g.className="player__artworkImage",f.b(this.a.querySelector(".player__artwork")).appendChild(this.g));b?this.g.src=b:(this.g.remove(),this.g=void 0);f.b(this.a.querySelector(".player__title")).innerText=c;f.b(this.a.querySelector(".player__artist")).innerText=d}pause(){this.K.className="icon-play2";this.m.pause()}play(){this.K.className="icon-pause";this.m.play()}show(){this.a.classList.remove("player--hidden");document.body.classList.add("hasPlayer")}Va(){this.a.classList.add("player--hidden");
document.body.classList.remove("hasPlayer")}Fb(a){this.m.currentTime=a*this.m.duration}ma(a){this.ka.style.transform=`translateX(calc(${-12+-12*a}px + ${100*a}%)`}fa(a){let {left:b,width:c}=this.ja.getBoundingClientRect();return Math.max(Math.min((a.clientX-(b+6))/(c-12),1),0)}}class za{constructor(a,b){this.id=a;this.w=b}static j(a){return{id:a.id,w:a.secret}}}class Aa{constructor(a,b,c,d,e){this.id=a;this.state=b;this.ua=c;this.ya=d;this.pa=e}static j(a){return{id:a.id,state:a.state,ua:a.failureReason,
ya:a.hasMatchedVotes,pa:a.accessTokenUuid}}}class Ba{constructor(a,b,c,d,e,k,m){this.position=a;this.A=b;this.s=c;this.u=d;this.l=e;this.H=k;this.backgroundColor=m}static j(a){return{position:a.position,A:a.songTitle,s:a.artistName,u:a.previewUrl,l:a.numVotes,H:a.artworkUrl,backgroundColor:a.backgroundColor}}}class Ca{constructor(a,b){this.results=a;this.P=b}static j(a){return{results:a.results.map(b=>Ba.j(b)),P:{Y:a.meta.numEntries,l:a.meta.numVotes,gb:a.meta.numPreviousYearVotes,$a:a.meta.lastProcessed}}}}
class ra{constructor(a,b,c){this.ab=a;this.Ib=b;this.Jb=c}zb(){return{linkingToken:this.ab,submissionId:this.Ib,submissionSecret:this.Jb}}}class Da{constructor(a,b){this.D=a;this.T=b}Oa(a){const b=this;return Z(function*(){var c=new FormData;c.append("file",a.file);c=yield b.D.ia(b.T+"/submission",{body:c,headers:void 0});return za.j(c)}())}Ua(a){const b=this;return Z(function*(){let c=yield b.D.ia(b.T+`/submission/${a.id}`,{body:JSON.stringify({secret:a.w}),headers:{"Content-Type":"application/json"}});
return Aa.j(c)}())}V(){const a=this;return Z(function*(){let b=yield a.D.get(a.T+"/results");return Ca.j(b)}())}rb(a){const b=this;return Z(function*(){yield b.D.ia(b.T+"/exchange",{body:JSON.stringify(a.zb()),headers:{"Content-Type":"application/json"}});return{}}())}}class pa{constructor(a){this.view=a;this.R=new Map;this.ga=new Set;a.h(2,this.ib.bind(this))}S(a){this.view.va().S(a)}Ga(a){this.view.va().Hb(a)}I(a){this.view.I(a);this.R.clear();this.ga.clear()}ob(a){this.view.Na();this.view.h(3,
a)}ib(a,b,c,d,e){b?this.R.has(c)||(a.Ab(),b=window.setTimeout(()=>{this.ga.has(c)||(this.ga.add(c),a.bb(c,d),e())},200),this.R.set(c,b)):(window.clearInterval(this.R.get(c)),this.R.delete(c))}}class M{constructor(a){this.a=a;this.K=this.a.querySelector(".result__artworkPlayButton span");this.g=f.b(this.a.querySelector(".result__artwork"))}static v(a){a=n(`<li class="result${a.O?" result--mega":""}"
      style="${a.O?`background: #${a.backgroundColor} radial-gradient(circle, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 100%)`:""}"
      data-preview-src="${a.u}"
      data-song-id="${a.J}"
      >
        <div class="container container--narrow">
          <div class="result__content">
            <div class="result__rankContainer">
              <div class="result__rank">${a.position}</div>
            </div>
            <div class="result__details">
              <div class="result__trackTitle">${a.A}</div>
              <div class="result__artistName">${a.s}</div>
              <div class="result__voteDetails">${a.l}
                votes (${a.Ka}%)
                ${a.u?'\n                    &nbsp;&nbsp;|&nbsp;&nbsp;\n                    <button class="result__listenButton">\n                      <span class="icon-play2"></span>&nbsp;Listen\n                    </button>\n                ':""}
              </div>
            </div>
            <div class="result__artwork">
                ${a.H?`
                <div class="result__artworkSpinner">
                    <div class="result__artworkPlaceholder"
                         data-alt="Cover artwork for ${a.A} - ${a.s}"
                         data-src="${a.H}"></div>
                  </div>
                  ${a.u?`
                  <button class="result__artworkPlayButton"
                            aria-label="Play ${a.A} by ${a.s}">
                      <span class="icon-play2"></span>
                    </button>
                  `:""}
                `:""}
            </div>
          </div>
        </div>
      </li>
`);return new M(a)}sa(a){return this.a===a.a}Ta(){return{tb:this.a.querySelector(".result__rank").textContent,ca:this.Pa(),J:w.B(this.a.dataset,"songId"),sb:w.B(this.a.dataset,"previewSrc"),ba:this.a.querySelector(".result__artistName").textContent,title:this.a.querySelector(".result__trackTitle").textContent}}Pa(){let a=this.a.querySelector(".result__artworkImage"),b=this.a.querySelector(".result__artworkPlaceholder");return null!=a?a.src:b?w.B(b.dataset,"src"):void 0}play(){this.g.classList.add("result__artwork--prePlay");
this.$("icon-pause");window.setTimeout(()=>{this.g.classList.add("result__artwork--playing")},300)}pause(){this.g.classList.add("result__artwork--paused");this.$("icon-play2")}resume(){this.g.classList.remove("result__artwork--paused");this.$("icon-pause")}Ha(){this.g.classList.add("result__artwork--fadeout");this.$("icon-play2");window.setTimeout(()=>{window.requestAnimationFrame(()=>{this.g.classList.remove("result__artwork--prePlay","result__artwork--playing");window.requestAnimationFrame(()=>
{this.g.classList.remove("result__artwork--fadeout")})})},350)}Ab(){f.b(this.a.querySelector(".result__artworkPlaceholder")).classList.add("result__artworkPlaceholder--loading")}bb(a,b){let c=f.b(this.a.querySelector(".result__artworkPlaceholder")),d=new Image;d.src=a;d.alt=b;d.classList.add("result__artworkImage","result__artworkImage--fadein");d.onload=()=>{c.parentNode.insertBefore(d,c);c.remove()};d.onerror=()=>{c.classList.remove("result__artworkPlaceholder--loading")}}$(a){this.K&&(this.K.className=
a)}}class X{constructor(a){this.a=a}static v(){let a=document.createElement("div");a.className="countdown__statusIndicator countdown__statusIndicator--hidden";return new X(a)}S(a){a?(this.aa(!0),this.a.innerHTML='<div class="countdown__statusIcon"><span class="icon-spinner"></span></div>'):this.aa(!1)}Hb(a){if(a){this.aa(!0);var b=document.createElement("div");b.className="countdown__statusMessage";b.innerText=a;this.a.innerHTML="";this.a.appendChild(b)}else this.aa(!1)}aa(a){a?this.a.classList.remove("countdown__statusIndicator--hidden"):
this.a.classList.add("countdown__statusIndicator--hidden")}}class oa extends G{constructor(a){super(a);this.X=f.b(this.a.querySelector(".countdown__list"))}da(){this.a.addEventListener("click",a=>this.jb(a));this.Ca()}va(){this.na||(this.na=X.v(),this.a.insertBefore(this.na.a,this.X));return this.na}I(a){this.X.innerHTML="";for(let b of a)a=M.v(b),this.X.appendChild(a.a);this.Ca()}Cb(a){null==this.L&&(this.L=document.createElement("div"),this.L.classList.add("container","container--narrow","countdown__footnote"),
this.a.appendChild(this.L));this.L.innerHTML="";this.L.appendChild(a)}Na(){(new IntersectionObserver(a=>{a.length&&this.i(3,a[0].isIntersecting)},{rootMargin:"-96px 0px"})).observe(this.X)}jb(a){let b=L(a.target,this.a,"result__artworkPlayButton");a=L(a.target,this.a,"result__listenButton");if(a=b||a){let c=S(a,this.a);this.i(1,c,a===b)}}Ca(){let a=this.Ra();this.a.querySelectorAll(".result__artworkPlaceholder").forEach(b=>a.observe(b))}Ra(){return this.U?this.U:this.U=new IntersectionObserver(a=>
this.hb(f.b(this.U),a))}hb(a,b){b.forEach(c=>{let d=c.target,e=S(d,this.a),k=w.B(d.dataset,"src"),m=w.B(d.dataset,"alt");this.i(2,e,c.isIntersecting,k,m,()=>a.unobserve(d))})}}let Ea={j(a){return{Y:a.num_entries,l:a.num_votes,gb:a.numPreviousYearVotes,Rb:a.last_processed_ts,xb:a.results_0_100.map(q)}}},Fa={j(a){return{Xa:a.instagram_post,Wa:a.instagram_direct_message,Ya:a.instagram_story,Pb:a.twitter_post,ub:a.reddit_comment,La:a.web_upload}}};class Ga{constructor(a,b){this.D=a;this.C=b}V(a){const b=
this;return Z(function*(){var c=[...a].sort();c=yield b.D.get(`/static/results/${b.C}/`+c.join("+")+".json");return Ea.j(c)}())}Qa(){const a=this;return Z(function*(){let b=yield a.D.get(`/static/results/${a.C}/entryCountsBySource.json`);return Fa.j(b)}())}}document.addEventListener("DOMContentLoaded",function(){let {M:a,C:b,ea:c}=w.wb(W.j),d=new ua(a),e=document.querySelector(".countdown"),k=document.querySelector(".uploader"),m=document.querySelector(".uploaderRoot--installGa"),A=new xa,E=new Da(A,
window.location.href.includes("localhost")?"http://localhost:8000":"https://s.100warmtunas.com");m&&(m.classList.add("uploader","uploader--ga"),m.innerHTML="",T(m,void 0,void 0,E));if(null!=e){let {la:z,o:x}=na(e);ka(d,z);y(d);z.da();null!=k&&T(k,z,x,E);K(()=>{if(b){let H=new Ga(A,b);r(H,d,e,x,c,b)}})}sa();da();ha();ja()})})();
//# sourceMappingURL=954b4c95.js.map
