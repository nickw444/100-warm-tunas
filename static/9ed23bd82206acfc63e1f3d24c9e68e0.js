'use strict';(function(){function q(a){r(()=>window.particlesJS.load("particles-js",a))}function m(a,b){a=e.b(k(a,b,"result"));return new t(a)}function k(a,b,c){for(;a&&a!==b;){if(a.classList.contains(c))return a;a=a.parentNode}}function u(){let a=document.querySelector(".header__spotify");if(null!=a){var b=new IntersectionObserver(c=>{c[0].isIntersecting&&(v(a),b.disconnect())});b.observe(a)}}function v(a){let b=document.createElement("iframe");b.src=f.j(a.dataset,"spotifyEmbedUrl");b.width=b.height=
"300px";b.classList.add("header__spotifyEmbed");b.title="Spotify Embed";b.onload=()=>{b.classList.add("header__spotifyEmbed--loaded")};a.appendChild(b)}class w{constructor(a){this.s=a}ia(a,b,c,d){gtag("event","play",{ma:this.s,ka:"listen",ja:"click",I:a,K:b,na:c,la:d})}}class f{static j(a,b){return e.b(a[b])}static da(a){return a(e.b(window.bootstrap))}}class e{static b(a){if(null==a)throw Error("expected value");return a}}class n{constructor({s:a,B:b}){this.B=b;this.s=a}static O(a){return new n({B:f.j(a,
"particlesJsConfig"),s:f.j(a,"gaMeasurementId")})}}let r=window.requestIdleCallback||(a=>window.setTimeout(a,50));class x{constructor(a,b,c){this.M=a;this.c=b;this.C=c;this.m=0;this.f=void 0;this.c.i(0,()=>this.Y());this.c.i(2,()=>this.aa());this.c.i(1,()=>this.Z());this.c.i(3,()=>this.G(e.b(this.f),!0));this.c.i(4,()=>this.$());this.c.i(5,d=>{this.c.ga(d)});this.C.i(0,this.G.bind(this))}G(a,b){if(this.f&&this.f.D(a))switch(this.m){case 2:return this.resume(a);case 1:return b&&this.pause(a);default:return}this.play(a)}play(a){if(!this.f||
!this.f.D(a)){this.m=1;null!=this.f&&this.f.L();this.f=a;a.play();var {A:b,I:c,w:d,ca:g,K:l,title:h}=a.S();this.c.ha(c);this.c.J(0);this.c.play();this.c.fa({A:b,title:h,w:d});this.c.show();this.M.ia(c,l,`${h} - ${d}`,g)}}pause(a){this.m=2;this.c.pause();a.pause()}resume(a){this.m=1;this.c.play();a.resume()}Y(){null!=this.f&&(this.m=0,this.f.L(),this.c.T(),this.f=void 0)}Z(){null!=this.f&&(this.m=2,this.f.pause())}aa(){null!=this.f&&(this.m=1,this.f.resume())}$(){this.c.J(this.c.R())}}class p{constructor(a){this.a=
a;this.F={}}l(a,...b){(a=this.F[a])&&a(...b)}i(a,b){this.F[a]=b}}class y extends p{constructor(a){super(a);this.g=void 0;this.h=e.b(a.querySelector("audio"));this.o=e.b(this.a.querySelector(".player__artworkPlayButton span"));this.ba=e.b(this.a.querySelector(".player__progressIndicator"));this.h.onended=()=>this.l(0);this.h.onpause=()=>this.l(1);this.h.onplay=()=>this.l(2);this.h.ontimeupdate=()=>this.l(4);e.b(this.a.querySelector(".player__artworkPlayButton")).addEventListener("click",()=>this.l(3));
let b=e.b(this.a.querySelector(".player__progress"));b.addEventListener("click",c=>{let {left:d,width:g}=b.getBoundingClientRect();this.l(5,Math.max(Math.min((c.clientX-d)/g,1),0))})}ha(a){this.h.setAttribute("src",a)}fa({A:a,title:b,w:c}){this.g||(this.g=document.createElement("img"),this.g.className="player__artworkImage",e.b(this.a.querySelector(".player__artwork")).appendChild(this.g));a?this.g.src=a:(this.g.remove(),this.g=void 0);e.b(this.a.querySelector(".player__title")).innerText=b;e.b(this.a.querySelector(".player__artist")).innerText=
c}pause(){this.o.className="icon-play2";this.h.pause()}play(){this.o.className="icon-pause";this.h.play()}show(){this.a.classList.remove("player--hidden");document.body.classList.add("hasPlayer")}T(){this.a.classList.add("player--hidden");document.body.classList.remove("hasPlayer")}R(){return this.h.currentTime/this.h.duration}ga(a){this.h.currentTime=a*this.h.duration}J(a){this.ba.style.left=`calc((${a} * -6px) + ${100*a}%)`}}class z{constructor(a){this.view=a;this.u=new Map;this.H=new Set;a.i(1,
this.W.bind(this))}W(a,b,c,d,g){b?this.u.has(c)||(a.ea(),b=window.setTimeout(()=>{this.H.has(c)||(this.H.add(c),a.U(c,d),g())},200),this.u.set(c,b)):(window.clearInterval(this.u.get(c)),this.u.delete(c))}}class t{constructor(a){this.a=a;this.o=this.a.querySelector(".result__artworkPlayButton span");this.g=e.b(this.a.querySelector(".result__artwork"))}D(a){return this.a===a.a}S(){return{ca:this.a.querySelector(".result__rank").innerText,A:this.P(),K:f.j(this.a.dataset,"songId"),I:f.j(this.a.dataset,
"previewSrc"),w:this.a.querySelector(".result__artistName").innerText,title:this.a.querySelector(".result__trackTitle").innerText}}P(){let a=this.a.querySelector(".result__artworkImage"),b=this.a.querySelector(".result__artworkPlaceholder");return null!=a?a.src:b?f.j(b.dataset,"src"):void 0}play(){this.g.classList.add("result__artwork--prePlay");window.setTimeout(()=>{this.g.classList.add("result__artwork--playing");this.v("icon-pause")},300)}pause(){this.g.classList.add("result__artwork--paused");
this.v("icon-play2")}resume(){this.g.classList.remove("result__artwork--paused");this.v("icon-pause")}L(){this.g.classList.add("result__artwork--fadeout");this.v("icon-play2");window.setTimeout(()=>{window.requestAnimationFrame(()=>{this.g.classList.remove("result__artwork--prePlay","result__artwork--playing");window.requestAnimationFrame(()=>{this.g.classList.remove("result__artwork--fadeout")})})},350)}ea(){e.b(this.a.querySelector(".result__artworkPlaceholder")).classList.add("result__artworkPlaceholder--loading")}U(a,
b){let c=e.b(this.a.querySelector(".result__artworkPlaceholder")),d=new Image;d.src=a;d.alt=b;d.classList.add("result__artworkImage","result__artworkImage--fadein");d.onload=()=>{c.parentNode.insertBefore(d,c);c.remove()};d.onerror=()=>{c.classList.remove("result__artworkPlaceholder--loading")}}v(a){this.o&&(this.o.className=a)}}class A extends p{N(){this.a.addEventListener("click",a=>this.X(a));this.V()}X(a){let b=k(a.target,this.a,"result__artworkPlayButton");a=k(a.target,this.a,"result__listenButton");
if(a=b||a){let c=m(a,this.a);this.l(0,c,a===b)}}V(){let a=new IntersectionObserver(b=>{b.forEach(c=>{const d=c.target,g=m(d,this.a),l=f.j(d.dataset,"src"),h=f.j(d.dataset,"alt");this.l(1,g,c.isIntersecting,l,h,()=>a.unobserve(d))})});this.a.querySelectorAll(".result__artworkPlaceholder").forEach(b=>a.observe(b))}}document.addEventListener("DOMContentLoaded",function(){let {s:a,B:b}=f.da(n.O),c=new w(a);var d=new A(e.b(document.querySelector(".countdown ul")));new z(d);d={C:d};({C:d}=d);{let g=new y(e.b(document.querySelector(".player")));
new x(c,g,d)}u();b&&q(b);d.N()})})();
